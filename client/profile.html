<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Tech Deals Dashboard</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4e+/b6+ZkP4N/OZ3Xe72dqZJG4aWtiAcViiVJCVwSokF1E9U2j6td7Tm2cF0aLys" crossorigin="anonymous">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.85);
            --text-muted: rgba(255, 255, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Enhanced Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(240, 147, 251, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(79, 172, 254, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-100px) rotate(180deg); opacity: 0.3; }
        }

        /* Profile Container */
        .profile-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 20px 40px;
            position: relative;
            z-index: 1;
        }

        /* Profile Header */
        .profile-header {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 50px 40px;
            margin-bottom: 40px;
            text-align: center;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 25px 25px 0 0;
        }

        .profile-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 56px;
            color: white;
            border: 5px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(240, 147, 251, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .profile-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(240, 147, 251, 0.4);
        }

        .profile-avatar::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* Profile Cards */
        .profile-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.08) 0%, 
                rgba(255, 255, 255, 0.03) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 30px;
            animation: fadeInUp 0.6s ease-out;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .profile-card:hover::before {
            opacity: 1;
        }

        .profile-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.12) 0%, 
                rgba(255, 255, 255, 0.06) 100%);
        }

        /* Cart Items */
        .cart-item {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.06) 0%, 
                rgba(255, 255, 255, 0.02) 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .cart-item:hover {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .cart-item img {
            width: 70px;
            height: 70px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Form Styles */
        .form-control, .form-select {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.08) 0%, 
                rgba(255, 255, 255, 0.04) 100%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--text-primary);
            border-radius: 12px;
            padding: 15px 18px;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .form-control:focus, .form-select:focus {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.12) 0%, 
                rgba(255, 255, 255, 0.06) 100%);
            border-color: rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
            box-shadow: 0 0 0 0.2rem rgba(79, 172, 254, 0.2);
            transform: translateY(-2px);
        }

        .form-control::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .form-label {
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Button Styles */
        .btn-primary {
            background: var(--primary-gradient);
            border: none;
            border-radius: 12px;
            padding: 14px 28px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-outline-light {
            border: 2px solid rgba(255, 255, 255, 0.25);
            color: var(--text-primary);
            border-radius: 12px;
            padding: 12px 24px;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 13px;
        }

        .btn-outline-light:hover {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.15) 0%, 
                rgba(255, 255, 255, 0.08) 100%);
            border-color: rgba(255, 255, 255, 0.4);
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.1);
        }

        .btn-danger {
            background: var(--warning-gradient);
            border: none;
            border-radius: 10px;
            padding: 10px 18px;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-danger:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(250, 112, 154, 0.4);
        }

        /* Stats */
        .stat-item {
            text-align: center;
            padding: 25px 20px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.06) 0%, 
                rgba(255, 255, 255, 0.02) 100%);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 36px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        /* Headings */
        h1 {
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        h3 {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h3 i {
            color: #4facfe;
            font-size: 1.3rem;
        }

        /* Animations */
        @keyframes fadeInDown {
            from { 
                opacity: 0; 
                transform: translateY(-30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Alert Styles */
        .alert {
            border-radius: 12px;
            border: none;
            backdrop-filter: blur(15px);
            font-weight: 500;
        }

        .alert-success {
            background: linear-gradient(135deg, 
                rgba(67, 233, 123, 0.15) 0%, 
                rgba(56, 249, 215, 0.1) 100%);
            color: #a5f3d0;
            border: 1px solid rgba(67, 233, 123, 0.2);
        }

        .alert-danger {
            background: linear-gradient(135deg, 
                rgba(244, 67, 54, 0.15) 0%, 
                rgba(239, 154, 154, 0.1) 100%);
            color: #fca5a5;
            border: 1px solid rgba(244, 67, 54, 0.2);
        }

        .alert-info {
            background: linear-gradient(135deg, 
                rgba(33, 150, 243, 0.15) 0%, 
                rgba(144, 202, 249, 0.1) 100%);
            color: #93c5fd;
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        /* Password Strength Indicator */
        .password-strength {
            height: 6px;
            border-radius: 3px;
            margin-top: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .strength-weak { 
            background: linear-gradient(90deg, #f44336, #ff6b6b); 
            width: 33%; 
        }
        
        .strength-medium { 
            background: linear-gradient(90deg, #ff9800, #ffc107); 
            width: 66%; 
        }
        
        .strength-strong { 
            background: var(--success-gradient); 
            width: 100%; 
        }

        /* Form Switch */
        .form-check-input:checked {
            background-color: #4facfe;
            border-color: #4facfe;
        }

        .form-check-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Badge Styles */
        .badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-success {
            background: var(--success-gradient);
        }

        .badge-info {
            background: var(--accent-gradient);
        }

        .badge-primary {
            background: var(--primary-gradient);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .profile-container {
                padding: 40px 15px 30px;
            }
            
            .profile-header, .profile-card {
                padding: 25px 20px;
            }
            
            .cart-item {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            h3 {
                font-size: 1.4rem;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    <div class="particles" id="particles"></div>
    
    <div class="profile-container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-avatar">
                <i class="bi bi-person-circle"></i>
            </div>
            <h1 id="profileUsername">Guest User</h1>
            <p class="lead mb-3">Premium Member</p>
            <div class="d-flex justify-content-center gap-2 flex-wrap">
                <span class="badge bg-success">Active</span>
                <span class="badge bg-info">Since <span id="memberSince">2024</span></span>
            </div>
        </div>

        <div class="row g-4">
            <!-- Left Column - Account Info & Cart -->
            <div class="col-xl-8 col-lg-7">
                <!-- Account Information -->
                <div class="profile-card">
                    <h3>
                        <i class="bi bi-person-badge"></i> Account Information
                    </h3>
                    
                    <form id="accountForm">
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">Username</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" id="username" value="Guest User" readonly>
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">Email</label>
                            </div>
                            <div class="col-md-9">
                                <input type="email" class="form-control" id="email" placeholder="your@email.com">
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">First Name</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" id="firstName" placeholder="John">
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">Last Name</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" id="lastName" placeholder="Doe">
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">Phone</label>
                            </div>
                            <div class="col-md-9">
                                <input type="tel" class="form-control" id="phone" placeholder="+91 6351834679">
                            </div>
                        </div>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <label class="form-label text-md-end">Address</label>
                            </div>
                            <div class="col-md-9">
                                <textarea class="form-control" id="address" rows="3" placeholder="Your address"></textarea>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-circle me-2"></i> Update Information
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Shopping Cart -->
                <div class="profile-card">
                    <h3>
                        <i class="bi bi-cart3"></i> Shopping Cart
                        <span class="badge bg-primary ms-2" id="cartCount">0</span>
                    </h3>
                    
                    <div id="cartItems">
                        <!-- Cart items will be populated here -->
                    </div>
                    
                    <div class="mt-4 p-3 border-top border-secondary">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="mb-0">Total: <span id="cartTotal">$0</span></h4>
                            <div>
                                <button class="btn btn-primary btn-sm me-2" onclick="checkout()">
                                    <i class="bi bi-credit-card me-1"></i> Checkout
                                </button>
                                <button class="btn btn-outline-light btn-sm" onclick="clearCart()">
                                    <i class="bi bi-trash me-1"></i> Clear Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Stats & Security -->
            <div class="col-xl-4 col-lg-5">
                <!-- User Stats -->
                <div class="profile-card">
                    <h3>
                        <i class="bi bi-graph-up"></i> Your Stats
                    </h3>
                    
                    <div class="row g-3">
                        <div class="col-6">
                            <div class="stat-item">
                                <div class="stat-number" id="statDealsFound">0</div>
                                <div class="stat-label">Deals Found</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-item">
                                <div class="stat-number" id="statSearchesMade">0</div>
                                <div class="stat-label">Searches Made</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-item">
                                <div class="stat-number" id="statAvgSavings">0%</div>
                                <div class="stat-label">Avg. Savings</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-item">
                                <div class="stat-number" id="statCategoriesSearched">0</div>
                                <div class="stat-label">Categories</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Password Change -->
                <div class="profile-card">
                    <h3>
                        <i class="bi bi-shield-lock"></i> Security
                    </h3>
                    
                    <form id="passwordForm">
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-5">
                                <label class="form-label text-md-end">Current Password</label>
                            </div>
                            <div class="col-md-7">
                                <input type="password" class="form-control" id="currentPassword" required>
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-3">
                            <div class="col-md-5">
                                <label class="form-label text-md-end">New Password</label>
                            </div>
                            <div class="col-md-7">
                                <input type="password" class="form-control" id="newPassword" required>
                                <div class="password-strength" id="passwordStrength"></div>
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-center mb-4">
                            <div class="col-md-5">
                                <label class="form-label text-md-end">Confirm New Password</label>
                            </div>
                            <div class="col-md-7">
                                <input type="password" class="form-control" id="confirmPassword" required>
                            </div>
                        </div>
                        <br>
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="bi bi-key me-2"></i> Change Password
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Preferences -->
                <div class="profile-card">
                    <h3>
                        <i class="bi bi-gear"></i> Preferences
                    </h3>
                    
                    <div class="mb-4">
                        <label class="form-label d-block mb-3">Notifications</label>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                            <label class="form-check-label" for="emailNotifications">
                                Email notifications for new deals
                            </label>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="pushNotifications">
                            <label class="form-check-label" for="pushNotifications">
                                Push notifications
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Currency</label>
                        <select class="form-select" id="currency">
                            <option value="USD" selected>USD ($)</option>
                            <option value="EUR">EUR (€)</option>
                            <option value="GBP">GBP (£)</option>
                            <option value="INR">INR (₹)</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-outline-light w-100" onclick="savePreferences()">
                        <i class="bi bi-save me-2"></i> Save Preferences
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    
    <script>
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random size
                const size = Math.random() * 4 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                // Random position
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                
                // Random animation delay and duration
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // Initialize profile page
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            loadUserData();
            loadCartData();
            loadStatsData();
            setupEventListeners();
        });

        // Load user data from localStorage
        function loadUserData() {
            const username = localStorage.getItem('username') || 'Guest User';
            document.getElementById('profileUsername').textContent = username;
            document.getElementById('username').value = username;
            
            // Load saved profile data
            const savedProfile = localStorage.getItem('userProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('email').value = profile.email || '';
                document.getElementById('firstName').value = profile.firstName || '';
                document.getElementById('lastName').value = profile.lastName || '';
                document.getElementById('phone').value = profile.phone || '';
                document.getElementById('address').value = profile.address || '';
            }
        }

        // Load cart data
        function loadCartData() {
            const cart = JSON.parse(localStorage.getItem('userCart') || '[]');
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> Your cart is empty. Start searching for tech deals!
                    </div>
                `;
                cartCount.textContent = '0';
                cartTotal.textContent = '$0';
                return;
            }
            
            let total = 0;
            let html = '';
            
            cart.forEach((item, index) => {
                const price = parseFloat(item.price.replace('$', ''));
                total += price;
                
                html += `
                    <div class="cart-item">
                        <div class="d-flex align-items-center">
                            <img src="${item.imageUrl}" alt="${item.title}">
                            <div class="ms-3">
                                <h6 class="mb-1">${item.title}</h6>
                                <small class="text-muted">${item.retailer}</small>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="me-3">${item.price}</span>
                            <button class="btn btn-danger btn-sm" onclick="removeFromCart(${index})">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            cartCount.textContent = cart.length;
            cartTotal.textContent = `$${total.toFixed(2)}`;
        }

        // Load stats data
        function loadStatsData() {
            const stats = JSON.parse(localStorage.getItem('techDealStats') || '{}');
            document.getElementById('statDealsFound').textContent = stats.dealsFound || 0;
            document.getElementById('statSearchesMade').textContent = stats.searchesMade || 0;
            document.getElementById('statAvgSavings').textContent = (stats.avgSavings || 0) + '%';
            document.getElementById('statCategoriesSearched').textContent = (stats.categoriesSearched || []).length || 0;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Account form
            document.getElementById('accountForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveAccountInfo();
            });

            // Password form
            document.getElementById('passwordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                changePassword();
            });

            // Password strength checker
            document.getElementById('newPassword').addEventListener('input', checkPasswordStrength);

            // Load preferences
            const preferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
            document.getElementById('emailNotifications').checked = preferences.emailNotifications !== false;
            document.getElementById('pushNotifications').checked = preferences.pushNotifications === true;
            document.getElementById('currency').value = preferences.currency || 'USD';
        }

        // Save account information
        function saveAccountInfo() {
            const profile = {
                email: document.getElementById('email').value,
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };
            
            localStorage.setItem('userProfile', JSON.stringify(profile));
            showNotification('Account information updated successfully!', 'success');
        }

        // Change password
        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (newPassword !== confirmPassword) {
                showNotification('New passwords do not match!', 'danger');
                return;
            }
            
            if (newPassword.length < 6) {
                showNotification('Password must be at least 6 characters long!', 'danger');
                return;
            }
            
            // In a real app, you'd validate current password with server
            localStorage.setItem('userPassword', newPassword);
            
            // Clear form
            document.getElementById('passwordForm').reset();
            document.getElementById('passwordStrength').className = 'password-strength';
            
            showNotification('Password changed successfully!', 'success');
        }

        // Check password strength
        function checkPasswordStrength() {
            const password = document.getElementById('newPassword').value;
            const strengthBar = document.getElementById('passwordStrength');
            
            if (password.length < 6) {
                strengthBar.className = 'password-strength strength-weak';
            } else if (password.length < 10 || !/[A-Z]/.test(password) || !/[0-9]/.test(password)) {
                strengthBar.className = 'password-strength strength-medium';
            } else {
                strengthBar.className = 'password-strength strength-strong';
            }
        }

        // Remove item from cart
        function removeFromCart(index) {
            const cart = JSON.parse(localStorage.getItem('userCart') || '[]');
            cart.splice(index, 1);
            localStorage.setItem('userCart', JSON.stringify(cart));
            loadCartData();
            showNotification('Item removed from cart!', 'info');
        }

        // Clear cart
        function clearCart() {
            if (confirm('Are you sure you want to clear your cart?')) {
                localStorage.setItem('userCart', JSON.stringify([]));
                loadCartData();
                showNotification('Cart cleared!', 'info');
            }
        }

        // Checkout
        function checkout() {
            const cart = JSON.parse(localStorage.getItem('userCart') || '[]');
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'info');
                return;
            }
            
            showNotification('Redirecting to checkout...', 'success');
            // In a real app, this would redirect to a checkout page
            setTimeout(() => {
                alert('Checkout functionality would be implemented here. This is a demo.');
            }, 1000);
        }

        // Save preferences
        function savePreferences() {
            const preferences = {
                emailNotifications: document.getElementById('emailNotifications').checked,
                pushNotifications: document.getElementById('pushNotifications').checked,
                currency: document.getElementById('currency').value
            };
            
            localStorage.setItem('userPreferences', JSON.stringify(preferences));
            showNotification('Preferences saved successfully!', 'success');
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} position-fixed top-0 start-50 translate-middle-x mt-3`;
            notification.style.zIndex = '9999';
            notification.style.minWidth = '300px';
            notification.innerHTML = `<i class="bi bi-info-circle"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>
