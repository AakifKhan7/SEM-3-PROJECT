<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Welcome</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <script>
        fetch('http://localhost:8080/api/user')
    </script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background: linear-gradient(-45deg, #1a1a2e, #16213e, #0f3460, #533483, #c06c84);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            25% {
                background-position: 50% 25%;
            }
            50% {
                background-position: 100% 50%;
            }
            75% {
                background-position: 50% 75%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: bgMove 20s linear infinite;
        }

        @keyframes bgMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Floating Shapes */
        .floating-shape {
            position: fixed;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            animation: float 6s ease-in-out infinite;
            z-index: -1;
        }

        .shape1 {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape2 {
            width: 120px;
            height: 120px;
            top: 70%;
            right: 10%;
            animation-delay: 2s;
        }

        .shape3 {
            width: 60px;
            height: 60px;
            bottom: 10%;
            left: 30%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Navbar Styles */
        .navbar-custom {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(33, 150, 243, 0.2) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(76, 175, 80, 0.3);
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        .navbar-custom.scrolled {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.3) 0%, rgba(33, 150, 243, 0.3) 100%);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(76, 175, 80, 0.4);
        }

        .navbar-brand-custom {
            color: white !important;
            font-size: 1.5rem;
            font-weight: 700;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .navbar-brand-custom:hover {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        .nav-link-custom {
            color: rgba(255, 255, 255, 0.9) !important;
            font-weight: 500;
            margin: 0 10px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .nav-link-custom:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white !important;
            transform: translateY(-2px);
        }

        .nav-link-custom.active {
            background: rgba(255, 255, 255, 0.2);
            color: white !important;
        }

        .logout-btn {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.2) 0%, rgba(244, 67, 54, 0.1) 100%);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: white;
            padding: 8px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.3) 0%, rgba(244, 67, 54, 0.2) 100%);
            border-color: rgba(244, 67, 54, 0.5);
            color: white;
            transform: translateY(-2px);
        }

        /* Main Content */
        .main-content {
            padding: 80px 0 50px;
            min-height: 100vh;
        }

        /* Welcome Section */
        .welcome-section {
            padding: 60px 0;
            text-align: center;
        }

        .welcome-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            padding: 50px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        .welcome-title {
            color: white;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .welcome-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .user-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-info h3 {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .user-info p {
            color: rgba(255, 255, 255, 0.9);
            margin: 10px 0;
            font-size: 1.1rem;
        }

        /* Feature Cards */
        .features-section {
            padding: 60px 0;
        }

        .feature-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            height: 100%;
            transition: all 0.3s ease;
            text-align: center;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.15);
        }

        .feature-icon {
            font-size: 3rem;
            color: white;
            margin-bottom: 20px;
        }

        .feature-title {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .feature-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Stats Section */
        .stats-section {
            padding: 60px 0;
        }

        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: left 0.3s ease;
            padding: 20px;
        }

        .mobile-menu.active {
            left: 0;
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .mobile-menu-overlay.active {
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }

            .welcome-subtitle {
                font-size: 1rem;
            }

            .welcome-card {
                padding: 30px 20px;
            }

            .mobile-menu-btn {
                display: block;
            }

            .desktop-nav {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            .mobile-menu-overlay {
                display: none;
            }

            .feature-card {
                margin-bottom: 20px;
            }

            .stat-card {
                margin-bottom: 20px;
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in-left {
            animation: slideInLeft 0.6s ease-out;
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    
    <!-- Floating Shapes -->
    <div class="floating-shape shape1"></div>
    <div class="floating-shape shape2"></div>
    <div class="floating-shape shape3"></div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand-custom" href="#home">
                <i class="bi bi-grid-3x3-gap-fill"></i>
                Dashboard
            </a>
            
            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="bi bi-list"></i>
            </button>

            <!-- Desktop Navigation -->
            <div class="desktop-nav">
                <div class="d-flex align-items-center">
                    <a class="nav-link-custom active" href="#home">
                        <i class="bi bi-house-door"></i> Home
                    </a>
                    <a class="nav-link-custom" href="#about">
                        <i class="bi bi-info-circle"></i> About Us
                    </a>
                    <a class="nav-link-custom" href="#services">
                        <i class="bi bi-briefcase"></i> Services
                    </a>
                    <a class="nav-link-custom" href="#contact">
                        <i class="bi bi-envelope"></i> Contact
                    </a>
                    <a class="nav-link-custom" href="compare.html" target="_blank">
                        <i class="bi bi-arrow-left-right"></i> Compare
                    </a>
                    <a class="nav-link-custom" href="profile.html" target="_blank">
                        <i class="bi bi-person-circle"></i> Profile
                    </a>
                    <a class="logout-btn" href="#" id="logoutBtn">
                        <i class="bi bi-box-arrow-right"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="text-white">Menu</h4>
            <button class="btn btn-link text-white" id="closeMobileMenu">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <div class="d-flex flex-column">
            <a class="nav-link-custom active mb-2" href="#home">
                <i class="bi bi-house-door"></i> Home
            </a>
            <a class="nav-link-custom mb-2" href="#about">
                <i class="bi bi-info-circle"></i> About Us
            </a>
            <a class="nav-link-custom mb-2" href="#services">
                <i class="bi bi-briefcase"></i> Services
            </a>
            <a class="nav-link-custom mb-2" href="#contact">
                <i class="bi bi-envelope"></i> Contact
            </a>
            <a class="nav-link-custom mb-2" href="compare.html" target="_blank">
                <i class="bi bi-arrow-left-right"></i> Compare
            </a>
            <a class="nav-link-custom mb-2" href="profile.html" target="_blank">
                <i class="bi bi-person-circle"></i> Profile
            </a>
            <a class="logout-btn mb-2" href="#" id="mobileLogoutBtn">
                <i class="bi bi-box-arrow-right"></i> Logout
            </a>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section id="home" class="welcome-section">
            <div class="container">
                <div class="welcome-card fade-in">
                    <h1 class="welcome-title">
                        <i class="bi bi-emoji-smile"></i> Welcome Back!
                    </h1>
                    <p class="welcome-subtitle">We're glad to see you again. Here's your personalized dashboard.</p>
                    
                    <div class="user-info">
                        <h3><i class="bi bi-person-circle"></i> User Information</h3>
                        <p><strong>Username:</strong> <span id="displayUsername">Guest User</span></p>
                        <p><strong>Status:</strong> <span class="badge bg-success">Active</span></p>
                        <p><strong>Last Login:</strong> <span id="lastLogin">Just now</span></p>
                        <p><strong>Account Type:</strong> Premium Member</p>
                    </div>

                    <div class="mt-4">
                        <button class="btn btn-lg btn-light me-3" onclick="scrollToSection('about')">
                            <i class="bi bi-info-circle"></i> Learn More
                        </button>
                        <button class="btn btn-lg btn-outline-light" onclick="scrollToSection('services')">
                            <i class="bi bi-briefcase"></i> View Services
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="container">
                <h2 class="text-center text-white mb-5 fade-in">Your Tech Deal Stats</h2>
                <div class="row">
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card fade-in">
                            <div class="stat-number" id="dealsFound">0</div>
                            <div class="stat-label">Deals Found</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card fade-in">
                            <div class="stat-number" id="searchesMade">0</div>
                            <div class="stat-label">Searches Made</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card fade-in">
                            <div class="stat-number" id="avgSavings">0%</div>
                            <div class="stat-label">Avg. Savings</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card fade-in">
                            <div class="stat-number" id="favoriteCategories">0</div>
                            <div class="stat-label">Categories Searched</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tech Deal Search Section -->
        <section id="services" class="features-section">
            <div class="container">
                <h2 class="text-center text-white mb-5 fade-in">Find Best Tech Deals</h2>
                
                <!-- Search Card -->
                <div class="welcome-card fade-in mb-5">
                    <h3 class="text-white mb-4">
                        <i class="bi bi-search"></i> Search for Tech Devices
                    </h3>
                    <p class="text-white mb-4">
                        Find the best deals on smartphones, laptops, tablets, and more. Compare prices across multiple retailers to get the best value for your money.
                    </p>
                    
                    <div class="row">
                        <div class="col-md-8 mx-auto">
                            <div class="search-container">
                                <div class="input-group mb-3">
                                    <input type="text" 
                                           class="form-control form-control-lg" 
                                           id="deviceSearchInput" 
                                           placeholder="Enter device name (e.g., iPhone 15, MacBook Pro, Samsung Galaxy S24)">
                                    <button class="btn btn-primary btn-lg" type="button" id="searchBtn">
                                        <i class="bi bi-search"></i> Search Deals
                                    </button>
                                </div>
                                
                                <!-- Quick Search Categories -->
                                <div class="quick-search-categories mb-4">
                                    <p class="text-white mb-3">Quick Search:</p>
                                    <div class="d-flex flex-wrap gap-2">
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="iphone">
                                            <i class="bi bi-phone"></i> iPhone 15
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="macbook">
                                            <i class="bi bi-laptop"></i> MacBook Pro
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="samsung">
                                            <i class="bi bi-phone"></i> Samsung Galaxy
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="ipad">
                                            <i class="bi bi-tablet"></i> iPad
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="airpods">
                                            <i class="bi bi-headphones"></i> AirPods
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="playstation">
                                            <i class="bi bi-controller"></i> PlayStation
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="xbox">
                                            <i class="bi bi-controller"></i> Xbox
                                        </button>
                                        <button class="btn btn-outline-light btn-sm quick-search-btn" data-device="watch">
                                            <i class="bi bi-smartwatch"></i> Smart Watch
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Results Container -->
                <div id="searchResults" class="search-results-container" style="display: none;">
                    <div class="welcome-card fade-in">
                        <h3 class="text-white mb-4">
                            <i class="bi bi-bag-heart"></i> Best Deals Found
                        </h3>
                        <div id="dealsList" class="row">
                            <!-- Deals will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Feature Cards -->
                <div class="row mt-5">
                    <div class="col-md-4 mb-4">
                        <div class="feature-card fade-in">
                            <div class="feature-icon">
                                <i class="bi bi-currency-dollar"></i>
                            </div>
                            <h3 class="feature-title">Price Comparison</h3>
                            <p class="feature-description">
                                Compare prices across multiple retailers to find the best deals on your favorite tech devices.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-card fade-in">
                            <div class="feature-icon">
                                <i class="bi bi-lightning"></i>
                            </div>
                            <h3 class="feature-title">Real-time Deals</h3>
                            <p class="feature-description">
                                Get instant access to the latest deals and discounts on smartphones, laptops, and more.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-card fade-in">
                            <div class="feature-icon">
                                <i class="bi bi-shield-check"></i>
                            </div>
                            <h3 class="feature-title">Verified Sellers</h3>
                            <p class="feature-description">
                                All deals are from verified and trusted retailers to ensure safe and secure purchases.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="features-section">
            <div class="container">
                <div class="welcome-card fade-in">
                    <h2 class="text-white mb-4">About Us</h2>
                    <p class="text-white mb-3">
                        Welcome to our platform designed for finding you the best tech deals out there.
                    </p>
                    <p class="text-white mb-3">
                        Our team of experts works tirelessly to ensure you have the best experience possible, 
                        with features that are both powerful and easy to use.
                    </p>
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h4 class="text-white">Our Mission</h4>
                            <p class="text-white">
                                To make your every cent of hard earned money worth investing in tech devices.
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h4 class="text-white">Our Vision</h4>
                            <p class="text-white">
                                To be the leading platform in our industry, setting standards for excellence.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="features-section">
            <div class="container">
                <div class="welcome-card fade-in">
                    <h2 class="text-white mb-4">Contact Us</h2>
                    <div class="row">
                        <div class="col-md-6">
                            <h4 class="text-white">Get in Touch</h4>
                            <p class="text-white mb-3">
                                <i class="bi bi-envelope"></i> kothariparthiv26@gmail.com
                            </p>
                            <p class="text-white mb-3">
                                <i class="bi bi-phone"></i> +91 6351834679
                            </p>
                            <p class="text-white">
                                <i class="bi bi-geo-alt"></i> LJ University<br>
                                Ahemdabad , Gujarat
                                382210
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h4 class="text-white">Business Hours</h4>
                            <p class="text-white">
                                Monday - Friday: 9:00 AM - 6:00 PM<br>
                                Saturday: 10:00 AM - 4:00 PM<br>
                                Sunday: Closed
                            </p>
                            <div class="mt-3">
                                <a href="#" class="btn btn-outline-light me-2">
                                    <i class="bi bi-facebook"></i>
                                </a>
                                <a href="#" class="btn btn-outline-light me-2">
                                    <i class="bi bi-twitter"></i>
                                </a>
                                <a href="#" class="btn btn-outline-light me-2">
                                    <i class="bi bi-linkedin"></i>
                                </a>
                                <a href="#" class="btn btn-outline-light">
                                    <i class="bi bi-instagram"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    
    <!-- Custom JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get user data from localStorage
            const username = localStorage.getItem('username') || 'Guest User';
            document.getElementById('displayUsername').textContent = username;
            
            // Set last login time
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('lastLogin').textContent = timeString;

            // Navbar scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.querySelector('.navbar-custom');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            // Mobile menu functionality
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const closeMobileMenu = document.getElementById('closeMobileMenu');

            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.add('active');
                mobileMenuOverlay.classList.add('active');
            });

            closeMobileMenu.addEventListener('click', closeMobileMenuFunc);
            mobileMenuOverlay.addEventListener('click', closeMobileMenuFunc);

            function closeMobileMenuFunc() {
                mobileMenu.classList.remove('active');
                mobileMenuOverlay.classList.remove('active');
            }

            // Logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');

            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                handleLogout();
            });

            mobileLogoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                handleLogout();
            });

            function handleLogout() {
                if (confirm('Are you sure you want to logout?')) {
                    // Clear localStorage
                    localStorage.removeItem('rememberMe');
                    localStorage.removeItem('username');
                    
                    // Show logout message
                    showLogoutMessage();
                    
                    // Redirect to login page after delay
                    setTimeout(function() {
                        window.location.href = 'login.html';
                    }, 2000);
                }
            }

            function showLogoutMessage() {
                const message = document.createElement('div');
                message.className = 'alert alert-success position-fixed top-0 start-50 translate-middle-x mt-3';
                message.style.zIndex = '9999';
                message.innerHTML = '<i class="bi bi-check-circle"></i> Logging out...';
                document.body.appendChild(message);
                
                setTimeout(function() {
                    message.remove();
                }, 2000);
            }

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // Update active nav link
                        document.querySelectorAll('.nav-link-custom').forEach(link => {
                            link.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        // Close mobile menu if open
                        closeMobileMenuFunc();
                    }
                });
            });

            // Add animation to elements on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all fade-in elements
            document.querySelectorAll('.fade-in').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(el);
            });

            // Initialize tech deal stats
            let techStats = {
                dealsFound: 0,
                searchesMade: 0,
                avgSavings: 0,
                categoriesSearched: new Set()
            };

            // Load stats from localStorage if available
            const savedStats = localStorage.getItem('techDealStats');
            if (savedStats) {
                techStats = JSON.parse(savedStats);
                techStats.categoriesSearched = new Set(techStats.categoriesSearched);
                updateStatsDisplay();
            }

            // Update stats display
            function updateStatsDisplay() {
                document.getElementById('dealsFound').textContent = techStats.dealsFound;
                document.getElementById('searchesMade').textContent = techStats.searchesMade;
                document.getElementById('avgSavings').textContent = techStats.avgSavings + '%';
                document.getElementById('favoriteCategories').textContent = techStats.categoriesSearched.size;
            }

            // Save stats to localStorage
            function saveStats() {
                const statsToSave = {
                    ...techStats,
                    categoriesSearched: Array.from(techStats.categoriesSearched)
                };
                localStorage.setItem('techDealStats', JSON.stringify(statsToSave));
            }

            // Device Search Functionality
            const deviceSearchInput = document.getElementById('deviceSearchInput');
            const searchBtn = document.getElementById('searchBtn');
            const searchResults = document.getElementById('searchResults');
            const dealsList = document.getElementById('dealsList');
            const quickSearchBtns = document.querySelectorAll('.quick-search-btn');

            // Search button click event
            searchBtn.addEventListener('click', function() {
                performSearch();
            });

            // Enter key press in search input
            deviceSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Quick search buttons
            quickSearchBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const device = this.getAttribute('data-device');
                    deviceSearchInput.value = device;
                    performSearch();
                });
            });

            function performSearch() {
                const searchTerm = deviceSearchInput.value.trim();
                
                if (!searchTerm) {
                    showNotification('Please enter a device name to search', 'warning');
                    return;
                }

                // Update search statistics
                techStats.searchesMade++;
                
                // Show loading state
                searchBtn.innerHTML = '<i class="bi bi-hourglass-split"></i> Searching...';
                searchBtn.disabled = true;

                // Simulate API call (replace with actual API call)
                setTimeout(function() {
                    searchDeviceDeals(searchTerm);
                }, 1500);
            }

            function searchDeviceDeals(searchTerm) {
                // This is where you'll make the actual API call to your backend
                // For now, I'll create a mock response structure
                
                // Example API call structure:
                // fetch('/api/search-deals', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json',
                //     },
                //     body: JSON.stringify({ device: searchTerm })
                // })
                // .then(response => response.json())
                // .then(data => displayDeals(data))
                // .catch(error => console.error('Error:', error));

                // Real tech deals and new launches data
                const techDealsDatabase = {
                    'iphone': [
                        {
                            title: 'iPhone 15 Pro Max - Latest Model',
                            retailer: 'Apple Store',
                            price: '$1,199',
                            originalPrice: '$1,399',
                            discount: '14% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=iPhone+15+Pro',
                            dealUrl: '#'
                        },
                        {
                            title: 'iPhone 15 - New Release',
                            retailer: 'Amazon',
                            price: '$799',
                            originalPrice: '$999',
                            discount: '20% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=iPhone+15',
                            dealUrl: '#'
                        }
                    ],
                    'samsung': [
                        {
                            title: 'Samsung Galaxy S24 Ultra - Just Launched',
                            retailer: 'Samsung',
                            price: '$1,299',
                            originalPrice: '$1,499',
                            discount: '13% OFF',
                            rating: 4.9,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Galaxy+S24',
                            dealUrl: '#'
                        },
                        {
                            title: 'Samsung Galaxy Tab S9 - New Tablet',
                            retailer: 'Best Buy',
                            price: '$899',
                            originalPrice: '$1,099',
                            discount: '18% OFF',
                            rating: 4.6,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Galaxy+Tab+S9',
                            dealUrl: '#'
                        }
                    ],
                    'macbook': [
                        {
                            title: 'MacBook Pro M3 - 2024 Model',
                            retailer: 'Apple',
                            price: '$1,999',
                            originalPrice: '$2,399',
                            discount: '17% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=MacBook+Pro+M3',
                            dealUrl: '#'
                        },
                        {
                            title: 'MacBook Air M2 - Updated',
                            retailer: 'Amazon',
                            price: '$1,099',
                            originalPrice: '$1,299',
                            discount: '15% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=MacBook+Air+M2',
                            dealUrl: '#'
                        }
                    ],
                    'playstation': [
                        {
                            title: 'PlayStation 5 Slim - New Version',
                            retailer: 'GameStop',
                            price: '$499',
                            originalPrice: '$549',
                            discount: '9% OFF',
                            rating: 4.9,
                            imageUrl: 'https://via.placeholder.com/150x150?text=PS5+Slim',
                            dealUrl: '#'
                        },
                        {
                            title: 'PS5 VR2 - Virtual Reality Headset',
                            retailer: 'Best Buy',
                            price: '$449',
                            originalPrice: '$549',
                            discount: '18% OFF',
                            rating: 4.5,
                            imageUrl: 'https://via.placeholder.com/150x150?text=PS5+VR2',
                            dealUrl: '#'
                        }
                    ],
                    'xbox': [
                        {
                            title: 'Xbox Series X - Holiday Deal',
                            retailer: 'Microsoft Store',
                            price: '$449',
                            originalPrice: '$499',
                            discount: '10% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Xbox+Series+X',
                            dealUrl: '#'
                        },
                        {
                            title: 'Xbox Series S - Updated Model',
                            retailer: 'Walmart',
                            price: '$249',
                            originalPrice: '$299',
                            discount: '17% OFF',
                            rating: 4.6,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Xbox+Series+S',
                            dealUrl: '#'
                        }
                    ],
                    'nintendo': [
                        {
                            title: 'Nintendo Switch OLED - Popular',
                            retailer: 'Nintendo',
                            price: '$329',
                            originalPrice: '$349',
                            discount: '6% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Switch+OLED',
                            dealUrl: '#'
                        }
                    ],
                    'ipad': [
                        {
                            title: 'iPad Pro M2 - Professional Grade',
                            retailer: 'Apple',
                            price: '$1,099',
                            originalPrice: '$1,299',
                            discount: '15% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=iPad+Pro+M2',
                            dealUrl: '#'
                        },
                        {
                            title: 'iPad Air 5 - Mid-Range Option',
                            retailer: 'Target',
                            price: '$549',
                            originalPrice: '$599',
                            discount: '8% OFF',
                            rating: 4.6,
                            imageUrl: 'https://via.placeholder.com/150x150?text=iPad+Air+5',
                            dealUrl: '#'
                        }
                    ],
                    'airpods': [
                        {
                            title: 'AirPods Pro 2 - Latest Generation',
                            retailer: 'Apple',
                            price: '$199',
                            originalPrice: '$249',
                            discount: '20% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=AirPods+Pro+2',
                            dealUrl: '#'
                        },
                        {
                            title: 'AirPods Max - Premium Headphones',
                            retailer: 'Amazon',
                            price: '$449',
                            originalPrice: '$549',
                            discount: '18% OFF',
                            rating: 4.5,
                            imageUrl: 'https://via.placeholder.com/150x150?text=AirPods+Max',
                            dealUrl: '#'
                        }
                    ],
                    'watch': [
                        {
                            title: 'Apple Watch Series 9 - New',
                            retailer: 'Apple',
                            price: '$399',
                            originalPrice: '$429',
                            discount: '7% OFF',
                            rating: 4.6,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Apple+Watch+S9',
                            dealUrl: '#'
                        },
                        {
                            title: 'Samsung Galaxy Watch 6 - Android',
                            retailer: 'Samsung',
                            price: '$299',
                            originalPrice: '$349',
                            discount: '14% OFF',
                            rating: 4.5,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Galaxy+Watch+6',
                            dealUrl: '#'
                        }
                    ],
                    'laptop': [
                        {
                            title: 'Dell XPS 15 - Creator Laptop',
                            retailer: 'Dell',
                            price: '$1,499',
                            originalPrice: '$1,899',
                            discount: '21% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Dell+XPS+15',
                            dealUrl: '#'
                        },
                        {
                            title: 'HP Spectre x360 - 2-in-1',
                            retailer: 'Best Buy',
                            price: '$1,199',
                            originalPrice: '$1,499',
                            discount: '20% OFF',
                            rating: 4.5,
                            imageUrl: 'https://via.placeholder.com/150x150?text=HP+Spectre',
                            dealUrl: '#'
                        }
                    ],
                    'headphones': [
                        {
                            title: 'Sony WH-1000XM5 - Noise Canceling',
                            retailer: 'Sony',
                            price: '$349',
                            originalPrice: '$399',
                            discount: '13% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Sony+XM5',
                            dealUrl: '#'
                        },
                        {
                            title: 'Bose QuietComfort Ultra - Premium',
                            retailer: 'Bose',
                            price: '$379',
                            originalPrice: '$429',
                            discount: '12% OFF',
                            rating: 4.7,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Bose+QC',
                            dealUrl: '#'
                        }
                    ],
                    'camera': [
                        {
                            title: 'Canon EOS R6 Mark II - Pro Camera',
                            retailer: 'Canon',
                            price: '$2,499',
                            originalPrice: '$2,999',
                            discount: '17% OFF',
                            rating: 4.9,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Canon+R6',
                            dealUrl: '#'
                        },
                        {
                            title: 'Sony Alpha A7 IV - Mirrorless',
                            retailer: 'Sony',
                            price: '$2,199',
                            originalPrice: '$2,499',
                            discount: '12% OFF',
                            rating: 4.8,
                            imageUrl: 'https://via.placeholder.com/150x150?text=Sony+A7IV',
                            dealUrl: '#'
                        }
                    ],
                    'default': [
                        {
                            title: `${searchTerm} - Tech Deal Available`,
                            retailer: 'Amazon',
                            price: '$899',
                            originalPrice: '$1,199',
                            discount: '25% OFF',
                            rating: 4.3,
                            imageUrl: 'https://via.placeholder.com/150x150?text=' + encodeURIComponent(searchTerm),
                            dealUrl: '#'
                        },
                        {
                            title: `${searchTerm} - Best Buy Special`,
                            retailer: 'Best Buy',
                            price: '$799',
                            originalPrice: '$999',
                            discount: '20% OFF',
                            rating: 4.4,
                            imageUrl: 'https://via.placeholder.com/150x150?text=' + encodeURIComponent(searchTerm),
                            dealUrl: '#'
                        }
                    ]
                };

                // Search for deals based on search term
                const searchLower = searchTerm.toLowerCase();
                let mockDeals = techDealsDatabase.default;
                let foundCategory = 'default';

                // Check if search term matches any category
                for (const [category, deals] of Object.entries(techDealsDatabase)) {
                    if (category !== 'default' && searchLower.includes(category)) {
                        mockDeals = deals;
                        foundCategory = category;
                        break;
                    }
                }

                // Update statistics
                techStats.dealsFound += mockDeals.length;
                techStats.categoriesSearched.add(foundCategory);
                
                // Calculate average savings
                let totalSavings = 0;
                mockDeals.forEach(deal => {
                    const discountPercent = parseInt(deal.discount.replace('% OFF', ''));
                    totalSavings += discountPercent;
                });
                const avgSavingsForSearch = Math.round(totalSavings / mockDeals.length);
                
                // Update running average
                if (techStats.searchesMade === 1) {
                    techStats.avgSavings = avgSavingsForSearch;
                } else {
                    techStats.avgSavings = Math.round((techStats.avgSavings * (techStats.searchesMade - 1) + avgSavingsForSearch) / techStats.searchesMade);
                }

                displayDeals(mockDeals);
                updateStatsDisplay();
                saveStats();
                
                // Reset search button
                searchBtn.innerHTML = '<i class="bi bi-search"></i> Search Deals';
                searchBtn.disabled = false;
            }

            function displayDeals(deals) {
                if (deals.length === 0) {
                    dealsList.innerHTML = `
                        <div class="col-12">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i> No deals found for "${deviceSearchInput.value}". Try searching for a different device.
                            </div>
                        </div>
                    `;
                } else {
                    dealsList.innerHTML = deals.map((deal, index) => `
                        <div class="col-md-4 mb-4">
                            <div class="deal-card bg-glass border border-light rounded p-3 h-100">
                                <div class="text-center mb-3">
                                    <img src="${deal.imageUrl}" alt="${deal.title}" class="img-fluid rounded" style="max-height: 150px;">
                                </div>
                                <h5 class="text-white mb-2">${deal.title}</h5>
                                <p class="text-warning mb-2">
                                    <i class="bi bi-star-fill"></i> ${deal.rating} 
                                    <small class="text-muted">(${deal.retailer})</small>
                                </p>
                                <div class="price-info mb-3">
                                    <h4 class="text-success mb-1">${deal.price}</h4>
                                    <small class="text-muted text-decoration-line-through">${deal.originalPrice}</small>
                                    <span class="badge bg-danger ms-2">${deal.discount}</span>
                                </div>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-info btn-sm" onclick="openProductDetails('${deal.title}', '${deal.retailer}', '${deal.price}', '${deal.originalPrice}', '${deal.discount}', '${deal.rating}', '${deal.imageUrl}')">
                                        <i class="bi bi-info-circle"></i> View Details
                                    </button>
                                    <a href="${deal.dealUrl}" class="btn btn-primary btn-sm" target="_blank">
                                        <i class="bi bi-cart"></i> View Deal
                                    </a>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                // Show results section
                searchResults.style.display = 'block';
                
                // Scroll to results
                searchResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `alert alert-${type} position-fixed top-0 start-50 translate-middle-x mt-3`;
                notification.style.zIndex = '9999';
                notification.innerHTML = `<i class="bi bi-info-circle"></i> ${message}`;
                document.body.appendChild(notification);
                
                setTimeout(function() {
                    notification.remove();
                }, 3000);
            }
        });

        // Helper function for smooth scrolling - globally accessible
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // Function to open product details in new tab
        function openProductDetails(title, retailer, price, originalPrice, discount, rating, imageUrl) {
            // Create product data object
            const productData = {
                title: title,
                retailer: retailer,
                price: price,
                originalPrice: originalPrice,
                discount: discount,
                rating: parseFloat(rating),
                image: imageUrl,
                name: title.split(' - ')[0], // Extract product name
                reviews: Math.floor(Math.random() * 1000) + 100 // Random review count
            };

            // Store product data in localStorage for the details page to retrieve
            localStorage.setItem('selectedProduct', JSON.stringify(productData));

            // Open product details page in new tab
            const productDetailsUrl = `productDetails.html?name=${encodeURIComponent(productData.name)}&id=${productData.name.toLowerCase().replace(/\s+/g, '-')}`;
            window.open(productDetailsUrl, '_blank');
        }
    </script>
</body>
</html>